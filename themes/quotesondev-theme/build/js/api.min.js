!function(n){"use strict";n(function(){n("#new-quote-button").on("click",function(e){e.preventDefault(),n.ajax({method:"GET",url:api_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(e){console.log(e);var t=e[0].content.rendered,o=e[0].title.rendered,u=e[0]._qod_quote_source,s=e[0]._qod_quote_source;n(".entry-content p").empty(),n(".entry-content p").append(t),n(".entry-title").empty(),n(".entry-title").append(o),e[0]._qod_quote_source&&e[0]._qod_quote_source_url?(n(".source").empty(),n(".source").append('<a href="'+s+'">'+u+"</a>")):e[0]._qod_quote_source?(n(".source").empty(),n(".source").append(u)):n(".source").empty(),history.pushState(null,null,e[0].slug),window.on("popstate",function(e){e.preventDefault()});history.go(-1)})})}),n(function(){n(".submit-quote").on("click",function(e){e.preventDefault();var t=n("#quote-author").val(),o=n("#quote-content").val(),u=n("#quote-source").val(),s=n("#quote-source-url").val();n.ajax({method:"post",url:api_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1",data:{title:t,content:o,_qod_quote_source:u,_qod_quote_source_url:s,status:"publish",comment_status:"open"},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",api_vars.nonce)}}).done(function(){n("#quote-author").empty(),n("#quote-content").empty(),n("#quote-source").empty(),n("#quote-source-url").empty(),n("#quote-submission-form").hide(),n(".submit-success-message").append(api_vars.success).show()}).fail(function(){n(".submit-success-message").append(api_vars.failure).show()})})})}(jQuery);