!function(a){"use strict";a(function(){a("#new-quote-button").on("click",function(e){e.preventDefault();var s=window.location.href;a.ajax({method:"GET",url:api_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(e){console.log(e);var t=e[0].content.rendered,o=e[0].title.rendered,u=e[0]._qod_quote_source,r=e[0]._qod_quote_source;a(".entry-content p").empty(),a(".entry-content p").append(t),a(".entry-title").empty(),a(".entry-title").append(o),e[0]._qod_quote_source&&e[0]._qod_quote_source_url?(a(".source").empty(),a(".source").append('<a href="'+r+'">'+u+"</a>")):e[0]._qod_quote_source?(a(".source").empty(),a(".source").append(u)):a(".source").empty();var n=api_vars.home_url+"/"+e[0].slug;history.pushState(null,null,n),a(window).on("popstate",function(){window.location.replace(s)})})})}),a(function(){a(".submit-quote").on("click",function(e){e.preventDefault();var t=a("#quote-author").val(),o=a("#quote-content").val(),u=a("#quote-source").val(),r=a("#quote-source-url").val();a.ajax({method:"post",url:api_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1",data:{title:t,content:o,_qod_quote_source:u,_qod_quote_source_url:r,status:"publish",comment_status:"open"},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",api_vars.nonce)}}).done(function(){a("#quote-author").empty(),a("#quote-content").empty(),a("#quote-source").empty(),a("#quote-source-url").empty(),a("#quote-submission-form").hide(),a(".submit-success-message").append(api_vars.success).show()}).fail(function(){a(".submit-success-message").append(api_vars.failure).show()})})})}(jQuery);